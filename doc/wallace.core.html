<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>wallace.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Wallace 0.1.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wallace</span></div></div></li><li class="depth-2 current"><a href="wallace.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="wallace.core.html#var-add-node.21"><div class="inner"><span>add-node!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-add-node-rel.21"><div class="inner"><span>add-node-rel!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-add-rel.21"><div class="inner"><span>add-rel!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-assoc-doc.21"><div class="inner"><span>assoc-doc!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-cb"><div class="inner"><span>cb</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-cbkey"><div class="inner"><span>cbkey</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-clean-delete-node.21"><div class="inner"><span>clean-delete-node!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-create-graph.21"><div class="inner"><span>create-graph!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-defdb"><div class="inner"><span>defdb</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-delete-node.21"><div class="inner"><span>delete-node!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-dissoc-doc.21"><div class="inner"><span>dissoc-doc!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-gen-eid.21"><div class="inner"><span>gen-eid!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-get-node"><div class="inner"><span>get-node</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-get-ntype-uuid"><div class="inner"><span>get-ntype-uuid</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-lookup-ntype"><div class="inner"><span>lookup-ntype</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-merge-node.21"><div class="inner"><span>merge-node!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-node-uuid"><div class="inner"><span>node-uuid</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-ntype.3F"><div class="inner"><span>ntype?</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-set-conj"><div class="inner"><span>set-conj</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-set-node.21"><div class="inner"><span>set-node!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-set-ntype.21"><div class="inner"><span>set-ntype!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-set-rel.21"><div class="inner"><span>set-rel!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-uuid"><div class="inner"><span>uuid</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">wallace.core</h2><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-add-node.21"><h3>add-node!</h3><div class="usage"><code>(add-node! db ntype data)</code></div><div class="doc"><pre class="plaintext">Add a node with ntype as ntype and data
</pre></div></div><div class="public anchor" id="var-add-node-rel.21"><h3>add-node-rel!</h3><div class="usage"><code>(add-node-rel! db uuid rel-uuid)</code><code>(add-node-rel! db eid ntype rel-uuid)</code></div><div class="doc"><pre class="plaintext">Add a specific rel-uuid into node&apos;s rel
</pre></div></div><div class="public anchor" id="var-add-rel.21"><h3>add-rel!</h3><div class="usage"><code>(add-rel! db data)</code></div><div class="doc"><pre class="plaintext">The actual function to put the relation into the database, it&apos;s ignorant of what the data is,
the data should at least contain :start :end :rtype. It returns the new-uuid</pre></div></div><div class="public anchor" id="var-assoc-doc.21"><h3>assoc-doc!</h3><div class="usage"><code>(assoc-doc! db id some-key some-val)</code></div><div class="doc"><pre class="plaintext">A simple assoc function for a specific doc in db with a specific id
</pre></div></div><div class="public anchor" id="var-cb"><h3>cb</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-cbkey"><h3>cbkey</h3><div class="usage"><code>(cbkey st)</code></div><div class="doc"><pre class="plaintext">A simple function that either accepts a string or otherwise and convert them into keyword
</pre></div></div><div class="public anchor" id="var-clean-delete-node.21"><h3>clean-delete-node!</h3><div class="usage"><code>(clean-delete-node! db eid ntype)</code></div><div class="doc"><pre class="plaintext">The cleanup function when deleting a node, we need to unregister it in the lookup
</pre></div></div><div class="public anchor" id="var-create-graph.21"><h3>create-graph!</h3><div class="usage"><code>(create-graph! db)</code></div><div class="doc"><pre class="plaintext">Function to initialise db, it creates meta data for the graph
</pre></div></div><div class="public anchor" id="var-defdb"><h3>defdb</h3><h4 class="type">macro</h4><div class="usage"><code>(defdb dbname exp)</code></div><div class="doc"><pre class="plaintext">Simple macro to wrap couchbase-clj defclient, it makes users do not have to add couchbase-clj to deps
</pre></div></div><div class="public anchor" id="var-delete-node.21"><h3>delete-node!</h3><div class="usage"><code>(delete-node! db uuid)</code><code>(delete-node! db eid ntype)</code></div><div class="doc"><pre class="plaintext">Delete a node, either by uuid or eid+ntype, also performs cleaning up the lookup data
</pre></div></div><div class="public anchor" id="var-dissoc-doc.21"><h3>dissoc-doc!</h3><div class="usage"><code>(dissoc-doc! db id some-key)</code></div><div class="doc"><pre class="plaintext">A simple dissoc a key from a doc in a db
</pre></div></div><div class="public anchor" id="var-gen-eid.21"><h3>gen-eid!</h3><div class="usage"><code>(gen-eid! db ntype)</code></div><div class="doc"><pre class="plaintext">Return a usable eid for a particular ntype
</pre></div></div><div class="public anchor" id="var-get-node"><h3>get-node</h3><div class="usage"><code>(get-node db uuid)</code><code>(get-node db eid ntype)</code></div><div class="doc"><pre class="plaintext">Get a node data either by its uuid or eid+ntype combination
</pre></div></div><div class="public anchor" id="var-get-ntype-uuid"><h3>get-ntype-uuid</h3><div class="usage"><code>(get-ntype-uuid db eid ntype)</code></div><div class="doc"><pre class="plaintext">Returns the uuid of a doc (either node or rel) with supplied eid+ntype
</pre></div></div><div class="public anchor" id="var-lookup-ntype"><h3>lookup-ntype</h3><div class="usage"><code>(lookup-ntype db ntype)</code></div><div class="doc"><pre class="plaintext">Returns the lookup doc for a particular ntype
</pre></div></div><div class="public anchor" id="var-merge-node.21"><h3>merge-node!</h3><div class="usage"><code>(merge-node! db uuid node-data)</code><code>(merge-node! db eid ntype node-data)</code></div><div class="doc"><pre class="plaintext">Merge the data of existing node identified by its uuid with the supplied node-data
</pre></div></div><div class="public anchor" id="var-node-uuid"><h3>node-uuid</h3><div class="usage"><code>(node-uuid db {:keys [uuid eid ntype]})</code></div><div class="doc"><pre class="plaintext">Get the node-uuid from db based on supplied map that may content uuid, eid, or ntype
</pre></div></div><div class="public anchor" id="var-ntype.3F"><h3>ntype?</h3><div class="usage"><code>(ntype? db ntype)</code></div><div class="doc"><pre class="plaintext">To check whether a certain ntype exist in database
</pre></div></div><div class="public anchor" id="var-set-conj"><h3>set-conj</h3><div class="usage"><code>(set-conj col elmt)</code></div><div class="doc"><pre class="plaintext">Performs set like behavior for vector conj to deal with json that do not have set
</pre></div></div><div class="public anchor" id="var-set-node.21"><h3>set-node!</h3><div class="usage"><code>(set-node! db uuid data)</code><code>(set-node! db ntype eid data)</code></div><div class="doc"><pre class="plaintext">Update the existing node with supplied uuid or eid+ntype combo with the data supplied.
The data is not including the meta-data for the node, it will be merge with existing &apos;data&apos;
part of the node</pre></div></div><div class="public anchor" id="var-set-ntype.21"><h3>set-ntype!</h3><div class="usage"><code>(set-ntype! db ntype)</code></div><div class="doc"><pre class="plaintext">Add a new ntype in graph database
</pre></div></div><div class="public anchor" id="var-set-rel.21"><h3>set-rel!</h3><div class="usage"><code>(set-rel! db start-node end-node rel-type &amp; data)</code></div><div class="doc"><pre class="plaintext">add a relation between 2 nodes, each node is a map with mandatory key :uuid or combination of
:eid and :ntype</pre></div></div><div class="public anchor" id="var-uuid"><h3>uuid</h3><div class="usage"><code>(uuid)</code></div><div class="doc"><pre class="plaintext">Simple function to generate a string containing a newly generated uuid
</pre></div></div></div></body></html>