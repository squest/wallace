<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>wallace.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Wallace 0.1.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wallace</span></div></div></li><li class="depth-2 current"><a href="wallace.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="wallace.core.html#var-add-node.21"><div class="inner"><span>add-node!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-add-ntype.21"><div class="inner"><span>add-ntype!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-add-rel.21"><div class="inner"><span>add-rel!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-add-rtype.21"><div class="inner"><span>add-rtype!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-all-nodes"><div class="inner"><span>all-nodes</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-all-nodes-rels"><div class="inner"><span>all-nodes-rels</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-all-rels"><div class="inner"><span>all-rels</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-all-types"><div class="inner"><span>all-types</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-assoc-doc.21"><div class="inner"><span>assoc-doc!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-assoc-lookup.21"><div class="inner"><span>assoc-lookup!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-assoc-rels"><div class="inner"><span>assoc-rels</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-cbkey"><div class="inner"><span>cbkey</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-create-graph.21"><div class="inner"><span>create-graph!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-create-index-lookup.21"><div class="inner"><span>create-index-lookup!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-create-key-index.21"><div class="inner"><span>create-key-index!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-create-type-index.21"><div class="inner"><span>create-type-index!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-defdb"><div class="inner"><span>defdb</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-dissoc-meta"><div class="inner"><span>dissoc-meta</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-get-index-lookup"><div class="inner"><span>get-index-lookup</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-get-key-index"><div class="inner"><span>get-key-index</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-get-node"><div class="inner"><span>get-node</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-get-node-rel"><div class="inner"><span>get-node-rel</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-get-rel"><div class="inner"><span>get-rel</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-get-uuid"><div class="inner"><span>get-uuid</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-index-doc"><div class="inner"><span>index-doc</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-index-node-key"><div class="inner"><span>index-node-key</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-key-indexed.3F"><div class="inner"><span>key-indexed?</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-lookup-nodes"><div class="inner"><span>lookup-nodes</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-lookup-rels"><div class="inner"><span>lookup-rels</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-lookup-type"><div class="inner"><span>lookup-type</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-merge-doc.21"><div class="inner"><span>merge-doc!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-ntype.3F"><div class="inner"><span>ntype?</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-register-node.21"><div class="inner"><span>register-node!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-register-rel.21"><div class="inner"><span>register-rel!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-relate.21"><div class="inner"><span>relate!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-rtype.3F"><div class="inner"><span>rtype?</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-set-conj"><div class="inner"><span>set-conj</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-set-rel.21"><div class="inner"><span>set-rel!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-substring.3F"><div class="inner"><span>substring?</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-type-indexed.3F"><div class="inner"><span>type-indexed?</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-update-rel.21"><div class="inner"><span>update-rel!</span></div></a></li><li class="depth-1"><a href="wallace.core.html#var-uuid"><div class="inner"><span>uuid</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">wallace.core</h2><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-add-node.21"><h3>add-node!</h3><div class="usage"><code>(add-node! db ntype &amp; data)</code></div><div class="doc"><pre class="plaintext">Add a new node with a given ntype and a given data as properties of the node
</pre></div></div><div class="public anchor" id="var-add-ntype.21"><h3>add-ntype!</h3><div class="usage"><code>(add-ntype! db ntype)</code></div><div class="doc"><pre class="plaintext">Add a new ntype into db
</pre></div></div><div class="public anchor" id="var-add-rel.21"><h3>add-rel!</h3><div class="usage"><code>(add-rel! db rtype data)</code></div><div class="doc"><pre class="plaintext">Specifically create a rel doc into db, with data (a map) as rel properties merged with metas
</pre></div></div><div class="public anchor" id="var-add-rtype.21"><h3>add-rtype!</h3><div class="usage"><code>(add-rtype! db rtype)</code></div><div class="doc"><pre class="plaintext">Add a new rtype into db, rtype can be a string/number/keyword
</pre></div></div><div class="public anchor" id="var-all-nodes"><h3>all-nodes</h3><div class="usage"><code>(all-nodes db ntype)</code></div><div class="doc"><pre class="plaintext">Returns all the nodes uuids for a particular ntype
</pre></div></div><div class="public anchor" id="var-all-nodes-rels"><h3>all-nodes-rels</h3><div class="usage"><code>(all-nodes-rels db node &amp; rtype)</code></div><div class="doc"><pre class="plaintext">Get all relations possessed by a particular node, node can be a node uuid or a complete node
</pre></div></div><div class="public anchor" id="var-all-rels"><h3>all-rels</h3><div class="usage"><code>(all-rels db rtype)</code></div><div class="doc"><pre class="plaintext">Returns all the rels uuids for a particular rtype
</pre></div></div><div class="public anchor" id="var-all-types"><h3>all-types</h3><div class="usage"><code>(all-types db)</code></div><div class="doc"><pre class="plaintext">Returns all types either ntype(s) and rtype(s)
</pre></div></div><div class="public anchor" id="var-assoc-doc.21"><h3>assoc-doc!</h3><div class="usage"><code>(assoc-doc! db nrdoc-or-uuid somekey somevalue)</code></div><div class="doc"><pre class="plaintext">Assoc a pair of key-value to a doc specified by its dbkey
</pre></div></div><div class="public anchor" id="var-assoc-lookup.21"><h3>assoc-lookup!</h3><div class="usage"><code>(assoc-lookup! db dbkey somekey somevalue)</code></div><div class="doc"><pre class="plaintext">Assoc the lookup doc with a new key-value pair, dbkey can be :node or :rel
</pre></div></div><div class="public anchor" id="var-assoc-rels"><h3>assoc-rels</h3><div class="usage"><code>(assoc-rels db node rtype rel)</code></div><div class="doc"><pre class="plaintext">Assoc a newly created rel into the nodes&apos; data
</pre></div></div><div class="public anchor" id="var-cbkey"><h3>cbkey</h3><div class="usage"><code>(cbkey st)</code></div><div class="doc"><pre class="plaintext">A simple function that either accepts a string or otherwise and convert them into keyword
</pre></div></div><div class="public anchor" id="var-create-graph.21"><h3>create-graph!</h3><div class="usage"><code>(create-graph! db)</code></div><div class="doc"><pre class="plaintext">Function to initialise db, it creates meta data for the graph
</pre></div></div><div class="public anchor" id="var-create-index-lookup.21"><h3>create-index-lookup!</h3><div class="usage"><code>(create-index-lookup! db gtype)</code></div><div class="doc"><pre class="plaintext">Create a new index lookup, only used in the beginning of graph creation
</pre></div></div><div class="public anchor" id="var-create-key-index.21"><h3>create-key-index!</h3><div class="usage"><code>(create-key-index! db {:keys [$gtype $nrtype]} field-key)</code></div><div class="doc"><pre class="plaintext">Create a new index for a specific nrkey
</pre></div></div><div class="public anchor" id="var-create-type-index.21"><h3>create-type-index!</h3><div class="usage"><code>(create-type-index! db {:keys [$gtype $nrtype]})</code></div><div class="doc"><pre class="plaintext">Create a type index
</pre></div></div><div class="public anchor" id="var-defdb"><h3>defdb</h3><h4 class="type">macro</h4><div class="usage"><code>(defdb dbname exp)</code></div><div class="doc"><pre class="plaintext">Simple macro to wrap couchbase-clj defclient, it makes users do not have to add couchbase-clj to deps
</pre></div></div><div class="public anchor" id="var-dissoc-meta"><h3>dissoc-meta</h3><div class="usage"><code>(dissoc-meta doc)</code></div><div class="doc"><pre class="plaintext">Dissoc some meta keys from the doc, to get the actual users data
</pre></div></div><div class="public anchor" id="var-get-index-lookup"><h3>get-index-lookup</h3><div class="usage"><code>(get-index-lookup db gtype nrtype)</code></div><div class="doc"><pre class="plaintext">Get the index-lookup doc for a certain n/r-type
</pre></div></div><div class="public anchor" id="var-get-key-index"><h3>get-key-index</h3><div class="usage"><code>(get-key-index db doc field-key)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-get-node"><h3>get-node</h3><div class="usage"><code>(get-node db uuid)</code></div><div class="doc"><pre class="plaintext">Get a node using its valid uuid
</pre></div></div><div class="public anchor" id="var-get-node-rel"><h3>get-node-rel</h3><div class="usage"><code>(get-node-rel db start-node rtype end-node)</code></div><div class="doc"><pre class="plaintext">Returns the uuid of a rel if there is a certain rtype relation between start-node and end-node
</pre></div></div><div class="public anchor" id="var-get-rel"><h3>get-rel</h3><div class="usage"><code>(get-rel db uuid)</code></div><div class="doc"><pre class="plaintext">Get a relation using its valid uuid
</pre></div></div><div class="public anchor" id="var-get-uuid"><h3>get-uuid</h3><div class="usage"><code>(get-uuid doc-or-uuid)</code></div><div class="doc"><pre class="plaintext">Returns the uuid string of a node/rel doc, if it&apos;s already a uuid string then simply pass it
</pre></div></div><div class="public anchor" id="var-index-doc"><h3>index-doc</h3><div class="usage"><code>(index-doc db doc)</code></div><div class="doc"><pre class="plaintext">FIXME I dont know what this is
</pre></div></div><div class="public anchor" id="var-index-node-key"><h3>index-node-key</h3><div class="usage"><code>(index-node-key db nrkey doc pair)</code></div><div class="doc"><pre class="plaintext">Assoc a new index key into the existing (or newly created) index doc for a particular nrtype
</pre></div></div><div class="public anchor" id="var-key-indexed.3F"><h3>key-indexed?</h3><div class="usage"><code>(key-indexed? db gtype nrtype field-key)</code></div><div class="doc"><pre class="plaintext">Check whether certain key properties of node/rel already indexed
</pre></div></div><div class="public anchor" id="var-lookup-nodes"><h3>lookup-nodes</h3><div class="usage"><code>(lookup-nodes db ntype)</code></div><div class="doc"><pre class="plaintext">Returns the lookup doc uuid for a particular ntype
</pre></div></div><div class="public anchor" id="var-lookup-rels"><h3>lookup-rels</h3><div class="usage"><code>(lookup-rels db rtype)</code></div><div class="doc"><pre class="plaintext">Returns the lookup doc uuid for a particular rtype
</pre></div></div><div class="public anchor" id="var-lookup-type"><h3>lookup-type</h3><div class="usage"><code>(lookup-type db gtype)</code></div><div class="doc"><pre class="plaintext">returns the one of two lookup, gtype either :node or :rel
</pre></div></div><div class="public anchor" id="var-merge-doc.21"><h3>merge-doc!</h3><div class="usage"><code>(merge-doc! db nrdoc-or-uuid data)</code></div><div class="doc"><pre class="plaintext">Merge data into a doc in db with dbkey as its identifier
</pre></div></div><div class="public anchor" id="var-ntype.3F"><h3>ntype?</h3><div class="usage"><code>(ntype? db ntype)</code></div><div class="doc"><pre class="plaintext">Returns true if ntype exist in db, false when otherwise
</pre></div></div><div class="public anchor" id="var-register-node.21"><h3>register-node!</h3><div class="usage"><code>(register-node! db ntype node-or-uuid)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-register-rel.21"><h3>register-rel!</h3><div class="usage"><code>(register-rel! db rtype rel-or-uuid)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-relate.21"><h3>relate!</h3><div class="usage"><code>(relate! db start-node rtype end-node &amp; data)</code></div><div class="doc"><pre class="plaintext">Relate start-node to end-node with a specific rtype type of relation, data is the property of
the relation, this function either add or update the relation between those two nodes.
start-node and end-node are maps with at least :uuid key exist in both. rtype can be an arbitrary
relation in string or keyword, either already exist in database or not.</pre></div></div><div class="public anchor" id="var-rtype.3F"><h3>rtype?</h3><div class="usage"><code>(rtype? db rtype)</code></div><div class="doc"><pre class="plaintext">Returns true if rtype exist in db, false if otherwise
</pre></div></div><div class="public anchor" id="var-set-conj"><h3>set-conj</h3><div class="usage"><code>(set-conj col elmt)</code></div><div class="doc"><pre class="plaintext">Performs set like behavior for vector conj to deal with json that do not have set datatype
</pre></div></div><div class="public anchor" id="var-set-rel.21"><h3>set-rel!</h3><div class="usage"><code>(set-rel! db node rtype rel)</code></div><div class="doc"><pre class="plaintext">Set the rel of a node with the rel-uuid
</pre></div></div><div class="public anchor" id="var-substring.3F"><h3>substring?</h3><div class="usage"><code>(substring? sb st)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-type-indexed.3F"><h3>type-indexed?</h3><div class="usage"><code>(type-indexed? db gtype nrtype)</code></div><div class="doc"><pre class="plaintext">Check whether or not a certain type already indexed in database, can check either for
ntype or rtype, gtype needs to be specified with either :node or :rel</pre></div></div><div class="public anchor" id="var-update-rel.21"><h3>update-rel!</h3><div class="usage"><code>(update-rel! db rel-or-uuid data)</code></div><div class="doc"><pre class="plaintext">Update the data of a rel with a specified uuid by merging the data into existing data
</pre></div></div><div class="public anchor" id="var-uuid"><h3>uuid</h3><div class="usage"><code>(uuid)</code></div><div class="doc"><pre class="plaintext">Simple function to generate a string containing a newly generated uuid
</pre></div></div></div></body></html>